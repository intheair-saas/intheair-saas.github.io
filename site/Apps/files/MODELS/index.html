<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Haitam Aouad Idrissi" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Models - IntheCloud Backend Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Models";
        var mkdocs_page_input_path = "Apps/files/MODELS.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/shell.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/http.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/env.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../logoBlanc.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Repo Description</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../..#dependencies">Dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../..#contact">Contact</a>
    </li>
    </ul>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Api</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Authentication/">Authentication API</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Authentication/#login">Login</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Authentication/#request">Request</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Authentication/#response">Response</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Authentication/#data">Data</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Authentication/#refresh">Refresh</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Authentication/#request_1">Request</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Authentication/#response_1">Response</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Company/">Company Endpoints</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Company/#retrieve-data">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Company/#single-company-data-companyid">Single company data : company/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Company/#all-companies-data-company">All Companies Data : company/</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Company/#delete-company">Delete Company</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Company/#create-company">Create company</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Company/#update-company">Update company</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Permissions/">Permissions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Project/">Project Endpoints</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project/#retrieve-data">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Project/#single-project-data-projectid">Single project data : project/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Project/#all-projects-data-project">All Projects Data : project/</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project/#delete-project">Delete project</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project/#create-project">Create project</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project/#update-project">Update project</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Project_File/">Project File API</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project_File/#retrieve-data">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Project_File/#single-project-file-data-dataid">Single Project File data : data/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Project_File/#raster-file">Raster file</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="../../../Api/Project_File/#retreive-raster-id">Retreive raster id:</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="../../../Api/Project_File/#retreive-raster-tiles">Retreive raster tiles</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project_File/#delete-project-file">Delete Project File</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project_File/#uploadcreate-a-project-file">Upload/Create a Project File</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project_File/#process-a-project-file">Process a Project File</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Project_File/#projectfile-layerorder-on-the-map">ProjectFile LayerOrder on the map</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Sector/">Sectors Endpoints</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Sector/#retrieve-data">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Sector/#single-sector-data-sectorid">Single sector data : sector/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Sector/#all-sectors-data-sector">All sectors Data : sector/</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Sector/#delete-sector">Delete Sector</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Sector/#create-sector">Create Sector</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/Types/">Types API</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#project-types">Project Types</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#retrieve-data">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Types/#single-project-type-data-projecttypeid">Single Project Type data : projecttype/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Types/#all-project-types-data-projecttype">All Project Types Data : projecttype/</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#delete-project-types">Delete Project Types</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#create-project-type">Create Project Type</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#file-types">File Types</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#retrieve-data_1">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Types/#single-file-type-data-filetypeid">Single file type data : filetype/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/Types/#all-file-types-data-filetype">All File Types Data : filetype/</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#delete-file-type">Delete File Type</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#create-file-type">Create File Type</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#data-types">Data Types</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#retrieve-data_2">Retrieve data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#delete-datatype">Delete datatype</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#create-datatype">Create datatype</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#file-extensions">File Extensions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#retrieve-data_3">Retrieve data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#delete-file-extensions">Delete File Extensions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/Types/#create-file-extensions">Create File Extensions</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Api/User/">User Endpoints</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/User/#retrieve-data">Retrieve data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/User/#single-user-data-userid">Single user data : user/&lt;id&gt;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../Api/User/#all-users-data-user">All users Data : user/</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/User/#update-user-data">Update User data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/User/#delete-user">Delete User</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/User/#create-user">Create User</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../Api/User/#change-password">Change Password</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Apps</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../Authentication/">Authentication</a>
    <ul>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Permissions/">Permissions</a>
    <ul>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Contact</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../contact/CONTACT/">Description</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../contact/CONTACT/#1-models">1. Models</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../contact/CONTACT/#2-views">2. Views</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../contact/CONTACT/#3-serializers">3. Serializers</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../contact/MODELS/">MODELS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../contact/SERIALIZERS/">SERIALIZERS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../contact/VIEWS/">VIEWS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Files</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../FILES/">Files App</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../FILES/#1-models">1. Models</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../FILES/#2-views">2. Views</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../FILES/#3-serializers">3. Serializers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../FILES/#4-scripts">4. Scripts</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Models</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SERIALIZERS/">Serializers</a>
    <ul>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../VIEWS/">VIEWS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Hubspot api</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../hubspot_api/HUBSPOT_API/">Hubspot Api App</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../hubspot_api/HUBSPOT_API/#1-models">1. Models</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../hubspot_api/HUBSPOT_API/#2-views">2. Views</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../hubspot_api/HUBSPOT_API/#3-serializers">3. Serializers</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../hubspot_api/MODELS/">MODELS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../hubspot_api/SERIALIZERS/">SERIALIZERS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../hubspot_api/VIEWS/">VIEWS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Raster</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../raster/MODELS/">Models</a>
    <ul>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../raster/RASTER/">Raster App</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../raster/RASTER/#1-models">1. Models</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../raster/RASTER/#2-views">2. Views</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../raster/RASTER/#3-serializers">3. Serializers</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../raster/SERIALIZERS/">SERIALIZERS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../raster/VIEWS/">VIEWS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Reports</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../reports/MODELS/">MODELS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../reports/REPORTS/">Reports App</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../reports/REPORTS/#1-models">1. Models</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../reports/REPORTS/#2-views">2. Views</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../reports/REPORTS/#3-serializers">3. Serializers</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../reports/SERIALIZERS/">SERIALIZERS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../reports/VIEWS/">VIEWS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">User</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../user/Models/">Models</a>
    <ul>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../user/SERIALIZERS/">SERIALIZERS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../user/USER/">USER App</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../user/USER/#1-models">1. Models</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../user/USER/#2-views">2. Views</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../user/USER/#3-serializers">3. Serializers</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../user/Views/">User Views</a>
    <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../user/Views/#userdetail">UserDetail</a>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Architecture/Database/">Database</a>
    <ul>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Architecture/Functionnal/">Functionnal</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../installation/INSTALLATION/">Installation Guide</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../../installation/INSTALLATION/#python-dependencies">Python dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../installation/INSTALLATION/#geospatial-dependencies">Geospatial dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../installation/INSTALLATION/#rabbitmq">RabbitMQ</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../installation/INSTALLATION/#configuration">Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../installation/INSTALLATION/#celery">Celery</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../installation/INSTALLATION/#email-server">Email server</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../installation/INSTALLATION/#database">Database</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../installation/INSTALLATION/#debug-and-security">Debug and Security</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../../installation/INSTALLATION/#run-the-server">Run the server</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../../installation/INSTALLATION/#init-the-data">Init the Data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../../installation/INSTALLATION/#run">Run</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">IntheCloud Backend Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Apps</li>
          <li class="breadcrumb-item">Files</li>
      <li class="breadcrumb-item active">Models</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="models">Models</h1>
<p>The files are handled by the App like files in a folder, the folder being the <a href="#projectfile"><code>ProjectFile</code></a> instance and the files in the folder are the files uploaded by the user saved as <a href="#filechunk"><code>FileChunk</code></a> instances. The <code>FileChunk</code> instance having a foreign key to the <code>ProjectFile</code> instance.</p>
<p><img alt="ProjectFile architecture" src="../../../assets/projectfile.png" title="ProjectFile architecture" /></p>
<h1 id="projectfile">ProjectFile</h1>
<p>Class which instances represents the files uploaded by the <code>AG_DATA</code> users and that are meant to be seen and downloaded by <code>CLIENT</code> users, as well as visualized on the platform.</p>
<pre><code class="language-python">class ProjectFile(models.Model):
    name = models.CharField(max_length=50, unique=True)
    description = models.CharField(max_length=500)
    file_type = models.ForeignKey(FileType, on_delete=models.CASCADE, null=True)
    file_extention =  models.ForeignKey(FileExtention, on_delete=models.CASCADE, null=True)
    data_type = models.ForeignKey(DataType, on_delete=models.CASCADE, null=True)
    date = models.DateField(auto_now=True)
    project = models.ForeignKey(Projects, on_delete=models.CASCADE, null=True, related_name=&quot;to_project&quot;)
    processed = models.BooleanField(default=False)
    error = models.BooleanField(default=False)
    error_message = models.CharField(max_length=500)
    def __str__(self):
        return self.name

    @property
    def allowed(self):
        return (self.project.user,)
</code></pre>
<ul>
<li><code>file_type</code> : foreign key to <a href="#filetype"><code>FileType</code></a> instance representing the file type (visualization mode)</li>
<li><code>data_type</code> : foreign key to <a href="#dattype"><code>DataType</code></a> instance representing to what table the data should be extracted.</li>
<li><code>project</code>: foreign key to <a href="/docs/Apps/user/Models.md#project"><code>Project</code></a> instance representing to what project the file is linked</li>
</ul>
<h2 id="callbacks">CallBacks</h2>
<h3 id="post_delete_file">post_delete_file()</h3>
<p>This callback delete the related files from the Storage System thus freeing space by removing unused files.</p>
<h3 id="post_save_project_file">post_save_Project_File()</h3>
<p>This callback create a <a href="#layerorder"><code>LayerOrder</code></a> instance for the file if it is a <code>GEO_FILE</code> instance (<code>GEO_FILE</code> is a <code>FileType</code> instance). It gives priority, putting them on top level, to files that has a <code>data_type</code> linked to them, thus files who are not <code>rasters</code>.</p>
<h1 id="layerorder">LayerOrder</h1>
<p>These instances represents the layers dispositions on the map, <code>GEO_FILE</code> with higher order number are displayed over <code>GEO_FILE</code> with lower ones.</p>
<pre><code class="language-python">class LayerOrder(models.Model):
    project_file = models.OneToOneField(ProjectFile, on_delete=models.CASCADE, primary_key=True)
    order = models.IntegerField(default=1)
</code></pre>
<h1 id="filetype">FileType</h1>
<p>Each <code>ProjectType</code> instance has a <code>FileType</code> attribute that represent how the file should be visualized for example <code>GEO_FILE</code> will be visualized on maps, <code>ANALYTICS</code> in tables, <code>IMAGES</code> on pup ups etc..
You can check the Class Structure using this link : <a href="...">Link For Class Structure</a></p>
<pre><code class="language-python">class FileType(models.Model):
    label = models.CharField(max_length=50, unique=True)
    description = models.CharField(max_length=500)

    def __str__(self):
        return self.label
</code></pre>
<h1 id="datatype">DataType</h1>
<p>Each <code>ProjectType</code> instance has a <code>DataType</code> attribute that represents how the file should be processed and where its data should be stored. In other words, it represents in what table the parsed data from the file will be stored, and what function will be used to parse de data
You can check the Class Structure using this link : <a href="...">Link For Class Structure</a></p>
<pre><code class="language-python">class DataType(models.Model):
    label = models.CharField(max_length=50, unique=True)
    description = models.CharField(max_length=500)
    object_type = models.ForeignKey(ContentType, on_delete=models.SET_NULL, null=True)
    fields = ArrayField(models.CharField(max_length=255), null=True)
</code></pre>
<ul>
<li><code>fields</code> : contains an array of all the fields label of the <code>DataType</code>, this array is automatically generated upon creation.</li>
<li><code>object_type</code> : is a foreign key to the <code>ContentType</code> table that collects all the tables created by django. Therefore, it is a foreign key to a <code>ContentType</code> instance, thus, a table. </li>
</ul>
<h2 id="call-backs">Call backs</h2>
<h3 id="post_delete_data">post_delete_data()</h3>
<p>This callback function is called when a <code>DataType</code> instance is deleted, its purpose is to delete the related <a href="#customdatatype"><code>CustomDataType</code></a> instance, thus deleting the <code>DataType</code> related table.</p>
<h1 id="fileextention">FileExtention</h1>
<p>Class which instances represent what extension the file is using. Those extensions are used only by the app and are not necessary the standards extensions used by the different file systems.</p>
<pre><code class="language-python">class FileExtention(models.Model):
    extention = models.CharField(max_length=20, unique=True)
    file_type = models.ForeignKey(FileType, on_delete=models.CASCADE, blank=False)

    def __str__(self):
        return self.extention
</code></pre>
<h1 id="filechunk">FileChunk</h1>
<p>Class which instances represents individual files that constitute the <code>ProjectFile</code>. Those files are received by chunks and then regrouped to form a complete file who is then processed.</p>
<pre><code class="language-python">
class FileChunk(models.Model):

    to_project_files = models.ForeignKey(ProjectFile, on_delete=models.CASCADE, null=True, related_name='files')

    file = models.URLField(null=True, max_length=1200)
    file_name = models.CharField(max_length=500)
    nbr_chunk= models.IntegerField()
    cumulated_chunk = models.IntegerField()
    @property
    def allowed(self):
        return (self.to_project_files.project.user,)
</code></pre>
<ul>
<li><code>to_project_files</code> : foreign key to the <code>ProjectFile</code> instance this file is related to.</li>
<li><code>nbr_chunk</code> : number of chunks expected to be received in the upload phase</li>
<li><code>cumulated_chunk</code> : number of chunks received and saved</li>
</ul>
<h1 id="filedatatype">FileDataType</h1>
<p>Class which instances represents the files that are received in order to create a new <code>DataType</code>.</p>
<pre><code class="language-python">
class FileDataType(models.Model):
    to_data= models.ForeignKey(DataType, on_delete=models.CASCADE,null=True, related_name='files')
    file = models.FileField(upload_to=get_upload_to_data, 
                            #storage=StorageManager()  # here we use the storage manager to rename the files if they exist
                            )
</code></pre>
<h2 id="callbacks_1">Callbacks</h2>
<h3 id="get_upload_to_data">get_upload_to_data()</h3>
<p>function that returns the file path in which the file will be saved.</p>
<h1 id="customdatatype">CustomDataType</h1>
<p>This class stores the necessary data that will be used to create a model from a <code>DataType</code>, and the the corresponding table after migrating the model.</p>
<pre><code class="language-python">class CustomDataType(models.Model):
    table_name = models.CharField(max_length=255)
    fields = models.JSONField()
    mapping = models.JSONField()
    params = models.JSONField()
</code></pre>
<ul>
<li><code>fields</code> : fields of the <code>DataType</code>. They are stored in the following format</li>
</ul>
<pre><code class="language-json">{
  //&quot;field name&quot;: &quot;field type&quot;,
  &quot;nbr&quot;: &quot;IntegerField&quot;,
  &quot;name&quot;: &quot;CharField&quot;,
}
</code></pre>
<ul>
<li><code>mapping</code> : a json object that maps the table column to the corresponding field in the file used to extract the <code>DataType</code> fields</li>
</ul>
<pre><code class="language-json">{
//&quot;field name in table&quot; : &quot;field name in file&quot;,
  &quot;com&quot;: &quot;COM&quot;,
  &quot;f_id&quot;: &quot;id&quot;,
  &quot;geom&quot;: &quot;POLYGON&quot;,
  &quot;pv_module&quot;: &quot;PV MODULE&quot;,
  &quot;criticalit&quot;: &quot;CRITICALIT&quot;
}
</code></pre>
<ul>
<li><code>params</code> : the django model parameters to include to the generated model fields on creation</li>
</ul>
<h1 id="rasterdata">RasterData</h1>
<p>class that represents the data extracted from the <code>raster</code> files</p>
<pre><code class="language-python">class RasterData(models.Model):
    project_file = models.ForeignKey(ProjectFile, on_delete=models.CASCADE, null=True)
    raster = models.ForeignKey(&quot;raster.RasterLayer&quot;, on_delete=models.CASCADE, null=True)
    lon = models.FloatField()
    lat = models.FloatField()

    @property
    def allowed(self):
        return (self.project_file.project.user,)
</code></pre>
<ul>
<li><code>raster</code> : foreign key to the <a href="/Apps/raster/MODELS#rasterlayer"><code>RasterLayer</code></a> instance related to the <code>project_file</code></li>
</ul>
<h1 id="projectfield">ProjectField</h1>
<p>This class instances represent the area that contains the project on the map. It is extracted from the <code>kml</code> file uploaded on project creation.</p>
<pre><code class="language-python">class ProjectField(models.Model):
    project = models.ForeignKey(Projects, on_delete=models.CASCADE, related_name='delimitation_field')
    geom = models.MultiPolygonField(srid=4326, dim=3)

    @property
    def allowed(self):
        if self.project:
            return (self.project_set.user,)
        return (None,)
</code></pre>
<ul>
<li><code>geom</code> : A geometry field (based on GIS library) that contains the data extracted from the <code>kml</code> file.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../FILES/" class="btn btn-neutral float-left" title="Files App"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../SERIALIZERS/" class="btn btn-neutral float-right" title="Serializers">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../FILES/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../SERIALIZERS/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
